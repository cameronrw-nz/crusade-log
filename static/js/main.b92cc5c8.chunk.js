(this["webpackJsonpcrusade-log"]=this["webpackJsonpcrusade-log"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a.p+"static/media/DeleteIcon.0d10f8f1.svg"},,,function(e,t,a){e.exports=a.p+"static/media/EditIcon.aa0b5ae2.svg"},function(e,t,a){e.exports=a.p+"static/media/CopyIcon.49972eac.svg"},function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),u=a.n(l),c=(a(16),a(17),a(1)),i=a(2),o=a(3);function m(e){var t=0;e.outOfAction&&e.outOfAction.forEach((function(e){e.isActive&&e.xp&&(t+=e.xp)}));var a=e.battleParticipation+3*e.markedForGreatness+e.agendaXp+Math.floor(e.kills/3)-t;return a>0?a:0}function d(e){var t,a,n=e.battleHonours&&e.battleHonours.length>0?null===(t=e.battleHonours)||void 0===t||null===(a=t.map((function(e){return e.crusadePoints})))||void 0===a?void 0:a.reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+t})):0,r=0;return e.outOfAction&&e.outOfAction.forEach((function(e){e.battleScar&&r--})),n+r}var s,E=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],u=a[1],i=m(e.unit),o=null;e.unit.warlordTrait&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Warlord Trait"))),r.a.createElement("tr",null,r.a.createElement("td",null,e.unit.warlordTrait.name),r.a.createElement("td",null,e.unit.warlordTrait.effect))));var d=[];e.unit.battleHonours&&e.unit.battleHonours.length>0&&(d.push(r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Battle Honours")))),e.unit.battleHonours.forEach((function(e){var t,a;d.push(r.a.createElement("tr",null,r.a.createElement("td",null,null===(t=e.battleTrait)||void 0===t?void 0:t.name),r.a.createElement("td",null,null===(a=e.battleTrait)||void 0===a?void 0:a.effect)))})));var s=[];e.unit.outOfAction&&e.unit.outOfAction.length>0&&(s.push(r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Battle Scars")),r.a.createElement("td",null))),e.unit.outOfAction.forEach((function(e){e.isActive&&e.battleScar&&s.push(r.a.createElement("tr",null,r.a.createElement("td",null,e.battleScar.name),r.a.createElement("td",null,e.battleScar.effect)))})));var E=null;return l&&(E=r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,"Battle Participation:"),r.a.createElement("td",null,e.unit.battleParticipation)),r.a.createElement("tr",null,r.a.createElement("td",null,"Marked For Greatness:"),r.a.createElement("td",null,e.unit.markedForGreatness)),r.a.createElement("tr",null,r.a.createElement("td",null,"Agenda:"),r.a.createElement("td",null,e.unit.agendaXp)),r.a.createElement("tr",null,r.a.createElement("td",null,"Kills:"),r.a.createElement("td",null,e.unit.kills)))),r.a.createElement(r.a.Fragment,null,o,d,s,r.a.createElement("tr",{onClick:function(){u(!l)}},r.a.createElement("td",null,"Total Experience:"),r.a.createElement("td",null,i)),E)};!function(e){e.BattleReady="Battle-Ready",e.Blooded="Blooded",e.BattleHardened="Battle-Hardened",e.Heroic="Heroic",e.Legendary="Legendary"}(s||(s={}));var f=function(e){function t(t,a){e.editUnit((function(e){var n=Object(i.a)({},e.outOfAction[a]);t(n),e.outOfAction.splice(a,1,n)}))}var a=[];return e.unit.outOfAction&&e.unit.outOfAction.length>0&&e.unit.outOfAction.forEach((function(e,n){var l;e.isActive&&a.push(r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{value:null===(l=e.battleScar)||void 0===l?void 0:l.effect,onChange:function(e){return t((function(t){return t.battleScar.effect=e.target.value}),n)},type:"textbox"})),r.a.createElement("td",null,r.a.createElement("input",{value:e.xp,onChange:function(e){return t((function(t){return t.xp=Number.parseInt(e.target.value)}),n)},type:"number"}))))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,"Out Of Action"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.editUnit((function(e){var t=e.outOfAction;t||(t=[]),t.push({isActive:!0}),e.outOfAction=t}))},type:"button",style:{padding:"10px"}},"Add"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Battle Scar"),r.a.createElement("td",null,"Experience Loss")),a)};var b=function(e){var t=m(e.unit)+1,a=Object(n.useState)(t-1),l=Object(c.a)(a,1)[0],u=0,d=e.unit.battleHonours.map((function(t){var a;u+=t.crusadePoints;var n,c=(null===(a=t.battleTrait)||void 0===a?void 0:a.effect)||"";(t.rank===s.Blooded&&l<6||t.rank===s.BattleHardened&&l<16||t.rank===s.Heroic&&l<31||t.rank===s.Legendary&&l<51)&&(c=r.a.createElement("input",{type:"text",value:(null===(n=t.battleTrait)||void 0===n?void 0:n.effect)||"",onChange:function(a){var n=Object(i.a)({},e.unit),r=n.battleHonours.find((function(e){return e.rank===t.rank}));(null===r||void 0===r?void 0:r.battleTrait)||(r.battleTrait={}),r.battleTrait.effect=a.target.value,e.updateUnit(n)}}));return r.a.createElement("tr",null,r.a.createElement("td",null,t.rank),r.a.createElement("td",null,c))}));return r.a.createElement("div",null,r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,e.unit.name)),r.a.createElement("td",null,"Crusade Points: "," "+u)),r.a.createElement("tr",null,r.a.createElement("td",null,"Battle Participation:"),r.a.createElement("td",null,"".concat(e.unit.battleParticipation," + 1"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Marked For Greatness:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(t){var a=Object(i.a)({},e.unit);a.markedForGreatness=Number.parseInt(t.target.value),e.updateUnit(a)},value:e.unit.markedForGreatness}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Agenda:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(t){var a=Object(i.a)({},e.unit);a.agendaXp=Number.parseInt(t.target.value),e.updateUnit(a)},value:e.unit.agendaXp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Kills:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(t){var a=Object(i.a)({},e.unit);a.kills=Number.parseInt(t.target.value),e.updateUnit(a)},value:e.unit.kills}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Experience:"),r.a.createElement("td",null,t)),d,r.a.createElement(f,{unit:e.unit,editUnit:function(t){var a=Object(i.a)({},e.unit,{outOfAction:Object(o.a)(e.unit.outOfAction||[])});t(a),e.updateUnit(a)}}))))};var v=function(e){var t=Object(n.useState)(e.crusadeArmy.units),a=Object(c.a)(t,2),l=a[0],u=a[1],d=Object(n.useState)(1),E=Object(c.a)(d,2),f=E[0],v=E[1],p=l.map((function(t,a){var n;if(null===(n=e.crusadeArmy.battleRosterUnitIds)||void 0===n?void 0:n.includes(a))return r.a.createElement(b,{unit:t,updateUnit:function(e){return function(e,t){var a=Object(o.a)(l),n=m(e)+1;e.battleHonours.findIndex((function(e){return e.rank===s.Blooded}))<0&&n>=6?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Blooded}):e.battleHonours.findIndex((function(e){return e.rank===s.BattleHardened}))<0&&n>=16?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.BattleHardened}):e.battleHonours.findIndex((function(e){return e.rank===s.Heroic}))<0&&n>=31?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Heroic}):e.battleHonours.findIndex((function(e){return e.rank===s.Legendary}))<0&&n>=51&&e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Legendary}),a.splice(t,1,e),u(a)}(e,a)}})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Fill Post Game Stats"),r.a.createElement("div",{className:"expand"},r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Requisition Points:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(e){return v(Number.parseInt(e.target.value))},value:f}))))),p),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack},"Back"),r.a.createElement("button",{className:"primary",onClick:function(){var t=Object(i.a)({},e.crusadeArmy);t.units=l,l.forEach((function(e){return e.battleParticipation++})),t.battleRosterUnitIds=void 0,e.updateArmy(t)}},"Save")))};var p=function(e){var t,a=Object(n.useState)(),l=Object(c.a)(a,2),u=l[0],i=l[1],o=[];return null===(t=e.crusadeArmy.battleRosterUnitIds)||void 0===t||t.forEach((function(t){var a=e.crusadeArmy.units.find((function(e){return e.id===t}));a&&(o.push(r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null,a.name)))),o.push(r.a.createElement(E,{unit:a,key:t})))})),u?r.a.createElement(v,{crusadeArmy:e.crusadeArmy,goBack:function(){return i(!1)},updateArmy:e.updateArmy}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Battle Roster"),r.a.createElement("div",{className:"expand"},r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tbody",null,o))),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack},"Back"),r.a.createElement("button",{className:"primary",onClick:function(){return i(!0)}},"Continue")))};var y=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],u=a[1],m=e.crusadeArmy.units.map((function(e,t){return r.a.createElement("div",{className:"read-only-display-item",onClick:function(){return function(e){var t=[];t=l.includes(e)?l.filter((function(t){return t!==e})):[].concat(Object(o.a)(l),[e]),u(t)}(e.id)}},r.a.createElement("input",{type:"checkbox",checked:l.includes(t)}),r.a.createElement("span",null,e.name),r.a.createElement("span",null,e.powerLevel+" ","PL"))})),d=0;return e.crusadeArmy.units.map((function(e,t){l.includes(t)&&(d+=e.powerLevel)})),e.crusadeArmy.battleRosterUnitIds?r.a.createElement(p,{crusadeArmy:e.crusadeArmy,goBack:function(){var t=Object(i.a)({},e.crusadeArmy);t.battleRosterUnitIds=void 0,e.updateArmy(t)},updateArmy:e.updateArmy}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Select Battle Roster"),r.a.createElement("p",null,"Selected Power Level:"," "+d),r.a.createElement("div",{className:"report-units expand"},m),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack},"Back"),r.a.createElement("button",{className:"primary",onClick:function(){var t=Object(i.a)({},e.crusadeArmy);t.battleRosterUnitIds=l,e.updateArmy(t)}},"Continue")))},g=a(6),k=a.n(g);var h=function(e){var t,a,l=Object(n.useState)(""===e.unit.name),u=Object(c.a)(l,1)[0],d=Object(n.useState)(e.unit),E=Object(c.a)(d,2),b=E[0],v=E[1];function p(t){t.preventDefault(),t.stopPropagation(),e.saveUnit(b)}function y(e){var t=Object(i.a)({},b,{battleHonours:Object(o.a)(b.battleHonours),outOfAction:Object(o.a)(b.outOfAction||[])});e(t);var a=m(t);t.battleHonours.findIndex((function(e){return e.rank===s.Blooded}))<0&&a>=6?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Blooded}):t.battleHonours.findIndex((function(e){return e.rank===s.BattleHardened}))<0&&a>=16?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.BattleHardened}):t.battleHonours.findIndex((function(e){return e.rank===s.Heroic}))<0&&a>=31?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Heroic}):t.battleHonours.findIndex((function(e){return e.rank===s.Legendary}))<0&&a>=51&&t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:s.Legendary}),v(t)}var g=m(b),h=0,A=b.battleHonours.map((function(e,t){var a;h+=e.crusadePoints;var n=r.a.createElement("input",{type:"text",value:null===(a=e.battleTrait)||void 0===a?void 0:a.effect,onChange:function(t){y((function(a){var n=a.battleHonours.find((function(t){return t.rank===e.rank}));(null===n||void 0===n?void 0:n.battleTrait)||(n.battleTrait={}),n.battleTrait.effect=t.target.value}))}});return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.rank),r.a.createElement("td",null,n))}));return r.a.createElement("form",{onSubmit:p,id:"edit-unit"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,(u?"Add Unit: ":"Edit Unit: ")+b.name,r.a.createElement("img",{className:"icon",src:k.a,alt:"Edit Links",onClick:function(){window.confirm("Are you sure you wish to delete this unit?")&&e.deleteUnit(e.unit)}}))),r.a.createElement("div",{className:"expand"},r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(e){return y((function(t){return t.name=e.target.value}))},type:"textbox",value:b.name}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Power Level"),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(e){return y((function(t){return t.powerLevel=Number.parseInt(e.target.value)}))},type:"number",value:b.powerLevel}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Crusade Points"),r.a.createElement("td",null,h)),r.a.createElement("tr",null,r.a.createElement("td",null,"Battle Participation:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(e){return y((function(t){return t.battleParticipation=Number.parseInt(e.target.value)}))},value:b.battleParticipation}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Marked For Greatness:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(e){return y((function(t){return t.markedForGreatness=Number.parseInt(e.target.value)}))},value:b.markedForGreatness}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Agenda:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(e){return y((function(t){return t.agendaXp=Number.parseInt(e.target.value)}))},value:b.agendaXp}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Kills:"),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(e){return y((function(t){return t.kills=Number.parseInt(e.target.value)}))},value:b.kills}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Total Experience:"),r.a.createElement("td",null,g)),A,r.a.createElement(f,{unit:b,editUnit:y}),r.a.createElement("tr",null,r.a.createElement("td",null,"Warlord Trait")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{type:"textbox",onChange:function(e){return y((function(t){t.warlordTrait||(t.warlordTrait={}),t.warlordTrait.name=e.target.value}))},value:(null===(t=b.warlordTrait)||void 0===t?void 0:t.name)||""})),r.a.createElement("td",null,r.a.createElement("input",{type:"textbox",onChange:function(e){return y((function(t){t.warlordTrait||(t.warlordTrait={}),t.warlordTrait.effect=e.target.value}))},value:(null===(a=b.warlordTrait)||void 0===a?void 0:a.effect)||""})))))),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack,type:"button"},"Back"),r.a.createElement("button",{className:"primary",onClick:p,type:"submit"},"Save")))},A=a(9),O=a.n(A);var w=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,e.headerText,r.a.createElement("img",{className:"icon",src:O.a,alt:"Edit Links",onClick:e.onEdit})),r.a.createElement("div",null,r.a.createElement("div",{className:"heading-sub-header"},r.a.createElement("b",null,e.powerLevel+" "),"PL"),r.a.createElement("div",{className:"heading-sub-header"},r.a.createElement("b",null,e.crusadePoints+" "),"CP")))};var N=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],u=a[1];if(l)return r.a.createElement(h,{deleteUnit:e.deleteUnit,goBack:function(){return u(!1)},unit:e.unit,saveUnit:function(t){e.saveUnit(t),u(!1)}});var i=d(e.unit);return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{crusadePoints:i,headerText:e.unit.name,powerLevel:e.unit.powerLevel,onEdit:function(){return u(!0)}}),r.a.createElement("div",{className:"expand"},r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tbody",null,r.a.createElement(E,{unit:e.unit})))),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack,type:"button"},"Back")))};var j=a(10),C=a.n(j);var x=function(e){var t=Object(n.useState)(""===e.crusadeArmy.name),a=Object(c.a)(t,1)[0],l=Object(n.useState)(e.crusadeArmy),u=Object(c.a)(l,2),o=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(){return e.saveArmy(o)},id:"edit-army"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,(a?"Add Army: ":"Edit Army: ")+o.name,r.a.createElement("img",{className:"icon",src:k.a,alt:"Edit Links",onClick:function(){window.confirm("Are you sure you wish to delete this army?")&&e.handleDeleteArmy()}}))),r.a.createElement("div",{className:"expand"},r.a.createElement("table",{className:"edittable-table"},r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(e){return function(e){var t=Object(i.a)({},o);e(t),m(t)}((function(t){return t.name=e.target.value}))},type:"textbox",value:o.name}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Copy from Clipboard:"),r.a.createElement("td",null,r.a.createElement("img",{className:"icon",src:C.a,alt:"Edit Links",onClick:function(){return function(e){if(navigator.clipboard){var t=JSON.stringify(e);navigator.clipboard.writeText(t).then((function(){window.alert("Copied to clipboard")})).catch((function(){window.alert("Can't copy to clipboard")}))}else window.alert("Can't copy to clipboard")}(e.crusadeArmy)}}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("textarea",{style:{width:"calc(100% - 8px)"},onChange:function(e){var t=JSON.parse(e.target.value);t.id=o.id,m(t)},value:JSON.stringify(o)}))))),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack,type:"button"},"Back"),r.a.createElement("button",{className:"primary",onClick:function(){return e.saveArmy(o)},type:"submit"},"Save"))))};var S=function(e){var t=Object(n.useState)(),a=Object(c.a)(t,2),l=a[0],u=a[1],o=Object(n.useState)(),m=Object(c.a)(o,2),E=m[0],f=m[1],b=Object(n.useState)(),v=Object(c.a)(b,2),p=v[0],g=v[1],k=Object(n.useState)(),h=Object(c.a)(k,2),A=h[0],O=h[1];function j(t){e.updateArmy(t),g(!1),f(!1)}Object(n.useEffect)((function(){var t=e.crusadeArmy.units.map((function(e){var t,a,n=null!==(t=null===(a=e.battleHonours[e.battleHonours.length-1])||void 0===a?void 0:a.rank)&&void 0!==t?t:s.BattleReady,l=d(e);return r.a.createElement("tr",{key:e.id,className:"read-only-display-item",onClick:function(){return u(e)}},r.a.createElement("td",null,e.name),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},n),r.a.createElement("td",null,l))}));O(t)}),[e.crusadeArmy,l,p]);var C=0,S=0;if(e.crusadeArmy.units.forEach((function(e){C+=d(e),S+=e.powerLevel})),E)return r.a.createElement(x,{crusadeArmy:e.crusadeArmy,goBack:function(){return f(!1)},handleDeleteArmy:function(){return e.deleteArmy(e.crusadeArmy)},saveArmy:j});if(p||e.crusadeArmy.battleRosterUnitIds)return r.a.createElement(y,{crusadeArmy:e.crusadeArmy,goBack:function(){return g(!1)},updateArmy:j});if(l)return r.a.createElement(N,{deleteUnit:function(t){var a=Object(i.a)({},e.crusadeArmy),n=a.units.findIndex((function(e){return e.id===t.id}));n>=0&&a.units.splice(n,1),e.updateArmy(a),u(void 0)},goBack:function(){return u(void 0)},saveUnit:function(t){var a=Object(i.a)({},e.crusadeArmy),n=a.units.findIndex((function(e){return e.id===t.id}));n>=0?a.units.splice(n,1,t):a.units.push(t),e.updateArmy(a),u(t)},unit:l});var B=null;return 0!==(null===A||void 0===A?void 0:A.length)&&(B=r.a.createElement("table",{className:"army-roster-units"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"CP"))),r.a.createElement("tbody",null,A))),r.a.createElement(r.a.Fragment,null,r.a.createElement(w,{crusadePoints:C,headerText:e.crusadeArmy.name,powerLevel:S,onEdit:function(){return f(!0)}}),r.a.createElement("div",{className:"army-roster-content"},B),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:e.goBack},"Back"),r.a.createElement("button",{onClick:function(){var t=0;e.crusadeArmy.units.forEach((function(e){e.id>t&&(t=e.id)})),u({id:t+1,agendaXp:0,battleHonours:[],battleParticipation:0,crusadePoints:0,kills:0,markedForGreatness:0,name:"",notes:"",outOfAction:[],powerLevel:0})}},"Add"),r.a.createElement("button",{className:"primary",onClick:function(){return g(!0)}},"Log")))};var B=function(){var e=Object(n.useState)(),t=Object(c.a)(e,2),a=t[0],l=t[1],u=Object(n.useState)(),i=Object(c.a)(u,2),o=i[0],m=i[1],s=Object(n.useState)(),E=Object(c.a)(s,2),f=E[0],b=E[1],v=Object(n.useState)(),p=Object(c.a)(v,2),y=p[0],g=p[1];function k(e){var t=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]"),a=t.findIndex((function(t){return t.id===e.id}));a>=0?t.splice(a,1,e):t.push(e),window.localStorage.setItem("crusadeArmies",JSON.stringify(t)),m(t);var n=t.find((function(t){return t.id===e.id}));b(n)}function h(e){var t=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]"),a=t.findIndex((function(t){return t.id===e.id}));a>=0&&t.splice(a,1),window.localStorage.setItem("crusadeArmies",JSON.stringify(t)),m(t),b(void 0)}return Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]");m(e)}),[]),Object(n.useEffect)((function(){if(o){var e=o.map((function(e,t){var a=0,n=0;return e.units.forEach((function(e){a+=d(e),n+=e.powerLevel})),r.a.createElement("div",{className:"armies-list-display",key:t,onClick:function(){return b(e)}},r.a.createElement("h2",null,e.name),r.a.createElement("span",null,n+" PL"),r.a.createElement("span",null,a+" CP"))}));g(e)}}),[o]),a?r.a.createElement(x,{crusadeArmy:a,handleDeleteArmy:function(){return h(a)},goBack:function(){return l(void 0)},saveArmy:k}):f?r.a.createElement(S,{deleteArmy:h,crusadeArmy:f,goBack:function(){return b(void 0)},updateArmy:k}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Crusade Armies"),r.a.createElement("div",{className:"expand"},y),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{onClick:function(){var e,t={name:"",id:null!==(e=null===o||void 0===o?void 0:o.length)&&void 0!==e?e:0,units:[]};l(t)},className:"primary"},"Add")))};var H=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.b92cc5c8.chunk.js.map