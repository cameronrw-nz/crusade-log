(this["webpackJsonpcrusade-log"]=this["webpackJsonpcrusade-log"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),u=n(7),c=n.n(u),o=(n(13),n(14),n(1)),i=n(2),s=n(3);!function(e){e.BattleReady="Battle-Ready",e.Blooded="Blooded",e.BattleHardened="Battle-Hardened",e.Heroic="Heroic",e.Legendary="Legendary"}(a||(a={}));var m=function(e){var t=e.unit.battleParticipation+1+3*e.unit.markedForGreatness+e.unit.agendaXp+Math.floor(e.unit.kills/3),n=Object(r.useState)(t-1),u=Object(o.a)(n,1)[0],c=0,s=e.unit.battleHonours.map((function(t){c+=t.crusadePoints;var n=t.effect;return(t.rank===a.Blooded&&u<6||t.rank===a.BattleHardened&&u<16||t.rank===a.Heroic&&u<31||t.rank===a.Legendary&&u<51)&&(n=l.a.createElement("input",{className:"report-input",type:"text",value:t.effect,onChange:function(n){var a=Object(i.a)({},e.unit);a.battleHonours.find((function(e){return e.rank===t.rank})).effect=n.target.value,e.updateUnit(a)}})),l.a.createElement("tr",null,l.a.createElement("td",null,t.rank),l.a.createElement("td",null,n))}));return l.a.createElement("div",null,l.a.createElement("table",{className:"report-unit-table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,e.unit.name)),l.a.createElement("td",null,"Crusade Points: "," "+c)),l.a.createElement("tr",null,l.a.createElement("td",null,"Battle Participation:"),l.a.createElement("td",null,"".concat(e.unit.battleParticipation," + 1"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Marked For Greatness:"),l.a.createElement("td",null,l.a.createElement("input",{className:"report-input",type:"number",onChange:function(t){var n=Object(i.a)({},e.unit);n.markedForGreatness=Number.parseInt(t.target.value),e.updateUnit(n)},value:e.unit.markedForGreatness}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Agenda:"),l.a.createElement("td",null,l.a.createElement("input",{className:"report-input",type:"number",onChange:function(t){var n=Object(i.a)({},e.unit);n.agendaXp=Number.parseInt(t.target.value),e.updateUnit(n)},value:e.unit.agendaXp}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Kills:"),l.a.createElement("td",null,l.a.createElement("input",{className:"report-input",type:"number",onChange:function(t){var n=Object(i.a)({},e.unit);n.kills=Number.parseInt(t.target.value),e.updateUnit(n)},value:e.unit.kills}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Total Experience:"),l.a.createElement("td",null,t)),s)))};var d=function(e){var t=Object(r.useState)(e.crusadeArmy.units),n=Object(o.a)(t,2),u=n[0],c=n[1],d=Object(r.useState)(1),f=Object(o.a)(d,2),E=f[0],p=f[1],b=u.map((function(t,n){if(e.selectedUnitIndexes.includes(n))return l.a.createElement(m,{unit:t,updateUnit:function(e){return function(e,t){var n=Object(s.a)(u),r=e.battleParticipation+1+3*e.markedForGreatness+e.agendaXp+Math.floor(e.kills/3);e.battleHonours.findIndex((function(e){return e.rank===a.Blooded}))<0&&r>=6?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,effect:"",rank:a.Blooded}):e.battleHonours.findIndex((function(e){return e.rank===a.BattleHardened}))<0&&r>=16?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,effect:"",rank:a.BattleHardened}):e.battleHonours.findIndex((function(e){return e.rank===a.Heroic}))<0&&r>=31?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,effect:"",rank:a.Heroic}):e.battleHonours.findIndex((function(e){return e.rank===a.Legendary}))<0&&r>=51&&e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,effect:"",rank:a.Legendary}),n.splice(t,1,e),c(n)}(e,n)}})}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Fill Post Game Stats"),l.a.createElement("div",{className:"expand"},l.a.createElement("div",null,"Requisition Points:",l.a.createElement("input",{type:"number",onChange:function(e){return p(Number.parseInt(e.target.value))},value:E})),b),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:e.goBack},"Back"),l.a.createElement("button",{onClick:function(){var t=Object(i.a)({},e.crusadeArmy);t.units=u,u.forEach((function(e){return e.battleParticipation++})),e.updateArmy(t)}},"Save")))};var f=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),a=n[0],u=n[1],c=Object(r.useState)(),i=Object(o.a)(c,2),m=i[0],f=i[1],E=e.crusadeArmy.units.map((function(e,t){return l.a.createElement("div",{className:"army-roster-units-item",onClick:function(){return function(e){var t=[];t=a.includes(e)?a.filter((function(t){return t!==e})):[].concat(Object(s.a)(a),[e]),u(t)}(t)}},l.a.createElement("input",{type:"checkbox",onChange:function(){},checked:a.includes(t)}),l.a.createElement("span",null,e.name),l.a.createElement("span",null,e.powerLevel+" ","PL"))})),p=0;return e.crusadeArmy.units.map((function(e,t){a.includes(t)&&(p+=e.powerLevel)})),m?l.a.createElement(d,{crusadeArmy:e.crusadeArmy,selectedUnitIndexes:a,goBack:function(){return f(!1)},updateArmy:e.updateArmy}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Select Battle Roster"),l.a.createElement("p",null,"Selected Power Level:"," "+p),l.a.createElement("div",{className:"report-units expand"},E),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:e.goBack},"Back"),l.a.createElement("button",{onClick:function(){return f(!0)}},"Continue")))};var E=function(e){var t=Object(r.useState)(""===e.unit.name),n=Object(o.a)(t,1)[0],u=Object(r.useState)(e.unit),c=Object(o.a)(u,2),m=c[0],d=c[1];function f(e){var t=Object(i.a)({},m,{battleHonours:Object(s.a)(m.battleHonours)});e(t);var n=t.battleParticipation+1+3*t.markedForGreatness+t.agendaXp+Math.floor(t.kills/3);t.battleHonours.findIndex((function(e){return e.rank===a.Blooded}))<0&&n>=6?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,effect:"",rank:a.Blooded}):t.battleHonours.findIndex((function(e){return e.rank===a.BattleHardened}))<0&&n>=16?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,effect:"",rank:a.BattleHardened}):t.battleHonours.findIndex((function(e){return e.rank===a.Heroic}))<0&&n>=31?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,effect:"",rank:a.Heroic}):t.battleHonours.findIndex((function(e){return e.rank===a.Legendary}))<0&&n>=51&&t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,effect:"",rank:a.Legendary}),d(t)}var E=m.battleParticipation+3*m.markedForGreatness+m.agendaXp+Math.floor(m.kills/3),p=Object(r.useState)(E),b=Object(o.a)(p,1)[0],v=0,k=m.battleHonours.map((function(e){v+=e.crusadePoints;var t=e.effect;return(e.rank===a.Blooded&&b<6||e.rank===a.BattleHardened&&b<16||e.rank===a.Heroic&&b<31||e.rank===a.Legendary&&b<51)&&(t=l.a.createElement("input",{type:"text",value:e.effect,onChange:function(t){f((function(n){n.battleHonours.find((function(t){return t.rank===e.rank})).effect=t.target.value}))}})),l.a.createElement("tr",null,l.a.createElement("td",null,e.rank),l.a.createElement("td",null,t))}));return l.a.createElement("form",{onSubmit:function(){return e.saveUnit(m)},id:"edit-unit"},l.a.createElement("h2",null,(n?"Add Unit: ":"Edit Unit: ")+m.name),l.a.createElement("div",{className:"expand"},l.a.createElement("table",{className:"report-unit-table"},l.a.createElement("tr",null,l.a.createElement("td",null,"Name:"),l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return f((function(t){return t.name=e.target.value}))},type:"textbox",value:m.name}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Power Level"),l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return f((function(t){return t.powerLevel=Number.parseInt(e.target.value)}))},type:"number",value:m.powerLevel}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Crusade Points"),l.a.createElement("td",null,v)),l.a.createElement("tr",null,l.a.createElement("td",null,"Battle Participation:"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",onChange:function(e){return f((function(t){return t.battleParticipation=Number.parseInt(e.target.value)}))},value:m.battleParticipation}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Marked For Greatness:"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",onChange:function(e){return f((function(t){return t.markedForGreatness=Number.parseInt(e.target.value)}))},value:m.markedForGreatness}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Agenda:"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",onChange:function(e){return f((function(t){return t.agendaXp=Number.parseInt(e.target.value)}))},value:m.agendaXp}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Kills:"),l.a.createElement("td",null,l.a.createElement("input",{type:"number",onChange:function(e){return f((function(t){return t.kills=Number.parseInt(e.target.value)}))},value:m.kills}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Total Experience:"),l.a.createElement("td",null,E)),k)),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:e.goBack,type:"button"},"Back"),l.a.createElement("button",{onClick:function(){return e.saveUnit(m)},type:"submit"},"Done")))};var p=function(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),u=n[0],c=n[1],s=Object(r.useState)(),m=Object(o.a)(s,2),d=m[0],p=m[1],b=Object(r.useState)(),v=Object(o.a)(b,2),k=v[0],g=v[1],y=Object(r.useState)(),h=Object(o.a)(y,2),O=h[0],j=h[1];Object(r.useEffect)((function(){var t=e.crusadeArmy.units.map((function(e){var t,n,r,u,c=null!==(t=null===(n=e.battleHonours[e.battleHonours.length-1])||void 0===n?void 0:n.rank)&&void 0!==t?t:a.BattleReady,o=(e.battleParticipation,e.markedForGreatness,e.agendaXp,Math.floor(e.kills/3),e.id===k),i=e.battleHonours&&e.battleHonours.length>0?null===(r=e.battleHonours)||void 0===r||null===(u=r.map((function(e){return e.crusadePoints})))||void 0===u?void 0:u.reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+t})):0;return l.a.createElement("tr",{className:"army-roster-units-item".concat(o?" selected":""),onClick:function(){return g(e.id)}},l.a.createElement("td",null,e.name),l.a.createElement("td",{style:{whiteSpace:"nowrap"}},c),l.a.createElement("td",null,i))}));j(t)}),[k,e.crusadeArmy,u,d]);var H=0,A=0;if(e.crusadeArmy.units.forEach((function(e){e.battleHonours.forEach((function(e){H+=e.crusadePoints})),A+=e.powerLevel})),d)return l.a.createElement(f,{crusadeArmy:e.crusadeArmy,goBack:function(){return p(!1)},updateArmy:function(t){e.updateArmy(t),p(!1)}});if(u)return l.a.createElement(E,{goBack:function(){return c(void 0)},saveUnit:function(t){var n=Object(i.a)({},e.crusadeArmy),a=n.units.findIndex((function(e){return e.id===t.id}));a>=0?n.units.splice(a,1,t):n.units.push(t),e.updateArmy(n),c(void 0)},unit:u});var N=null;return 0!==(null===O||void 0===O?void 0:O.length)&&(N=l.a.createElement("table",{className:"army-roster-units"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Rank"),l.a.createElement("th",null,"CP"))),O)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"army-roster-header"},l.a.createElement("h1",null,e.crusadeArmy.name),l.a.createElement("div",null,l.a.createElement("div",{className:"army-roster-pl"},l.a.createElement("b",null,A+" "),"PL"),l.a.createElement("div",{className:"army-roster-cp"},l.a.createElement("b",null,H+" "),"CP"))),l.a.createElement("div",{className:"army-roster-content"},N),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:e.goBack},"Back"),l.a.createElement("button",{onClick:function(){var t={id:e.crusadeArmy.units.length,agendaXp:0,battleHonours:[],battleParticipation:0,crusadePoints:0,kills:0,markedForGreatness:0,name:"",notes:"",outOfAction:[],powerLevel:0};c(t)}},"Add"),l.a.createElement("button",{onClick:function(){return c(e.crusadeArmy.units.find((function(e){return e.id===k})))}},"Edit"),l.a.createElement("button",{className:"primary",onClick:function(){return p(!0)}},"Log")))};var b=function(e){var t=Object(r.useState)(""===e.crusadeArmy.name),n=Object(o.a)(t,1)[0],a=Object(r.useState)(e.crusadeArmy),u=Object(o.a)(a,2),c=u[0],s=u[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:function(){return e.saveArmy(c)},id:"edit-army"},l.a.createElement("h2",null,(n?"Add Army: ":"Edit Army: ")+c.name),l.a.createElement("div",{className:"expand"},l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Name:"),l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return function(e){var t=Object(i.a)({},c);e(t),s(t)}((function(t){return t.name=e.target.value}))},type:"textbox",value:c.name}))))),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:e.goBack,type:"button"},"Back"),l.a.createElement("button",{onClick:function(){return e.saveArmy(c)},type:"submit"},"Save"))))};var v=function(){var e=Object(r.useState)(),t=Object(o.a)(e,2),n=t[0],a=t[1],u=Object(r.useState)(),c=Object(o.a)(u,2),i=c[0],s=c[1],m=Object(r.useState)(),d=Object(o.a)(m,2),f=d[0],E=d[1],v=Object(r.useState)(),k=Object(o.a)(v,2),g=k[0],y=k[1];function h(e){var t=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]"),n=t.findIndex((function(t){return t.id===e.id}));n>=0?t.splice(n,1,e):t.push(e),window.localStorage.setItem("crusadeArmies",JSON.stringify(t)),s(t);var a=t.find((function(t){return t.id===e.id}));E(a)}return Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]");s(e)}),[]),Object(r.useEffect)((function(){if(i){var e=i.map((function(e){var t=0,n=0;return e.units.forEach((function(e){e.battleHonours.forEach((function(e){t+=e.crusadePoints})),n+=e.powerLevel})),l.a.createElement("div",{className:"armies-list-display",onClick:function(){return E(e)}},l.a.createElement("h2",null,e.name),l.a.createElement("span",null,n+" PL"),l.a.createElement("span",null,t+" CP"))}));y(e)}}),[i]),n?l.a.createElement(b,{crusadeArmy:n,goBack:function(){return a(void 0)},saveArmy:h}):f?l.a.createElement(p,{crusadeArmy:f,goBack:function(){return E(void 0)},updateArmy:h}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Crusade Armies"),l.a.createElement("div",{className:"expand"},g),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{onClick:function(){var e,t={name:"",id:null!==(e=null===i||void 0===i?void 0:i.length)&&void 0!==e?e:0,units:[]};a(t)}},"Add")))};var k=function(){return l.a.createElement("div",{className:"app"},l.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.57ee3054.chunk.js.map