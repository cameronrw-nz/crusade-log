(this["webpackJsonpcrusade-log"]=this["webpackJsonpcrusade-log"]||[]).push([[0],{12:function(e,t,a){e.exports=a.p+"static/media/DeleteIcon.0d10f8f1.svg"},19:function(e,t,a){e.exports=a.p+"static/media/EditIcon.aa0b5ae2.svg"},20:function(e,t,a){e.exports=a.p+"static/media/CopyIcon.49972eac.svg"},21:function(e,t,a){e.exports=a(32)},26:function(e,t,a){},27:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),u=(a(26),a(27),a(5)),o=a(6),i=a(9);function m(e){var t=0;e.outOfAction&&e.outOfAction.forEach((function(e){e.isActive&&e.xp&&(t+=e.xp)}));var a=e.battleParticipation+3*e.markedForGreatness+e.agendaXp+Math.floor(e.kills/3)-t;return a>0?a:0}function s(e){var t,a,n=e.battleHonours&&e.battleHonours.length>0?null===(t=e.battleHonours)||void 0===t||null===(a=t.map((function(e){return e.crusadePoints})))||void 0===a?void 0:a.reduce((function(e,t){return(null!==e&&void 0!==e?e:0)+t})):0,r=0;return e.outOfAction&&e.outOfAction.forEach((function(e){e.battleScar&&r--})),n+r}var d=a(33),f=a(18),E=a(37);var b=function(e){var t=[];return e.nameEffects.forEach((function(e){t.push(r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Subtitle,{className:"mt-1 ml-2"},e.name),r.a.createElement(E.a.Text,{className:"ml-2"},e.effect)))})),r.a.createElement(d.a,{className:"mb-3"},r.a.createElement(f.a,null,r.a.createElement(E.a,null,r.a.createElement(E.a.Header,{className:"py-1"},e.header),t)))};var v,p=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],c=a[1],o=m(e.unit),i=null;e.unit.warlordTrait&&(i=r.a.createElement(b,{header:"Warlord Trait",nameEffects:[e.unit.warlordTrait]}));var s=void 0;if(e.unit.battleHonours&&e.unit.battleHonours.length>0){var E=[];e.unit.battleHonours.forEach((function(e){e.battleTrait&&E.push(e.battleTrait)})),s=r.a.createElement(b,{header:"Battle Honours",nameEffects:E})}var v=void 0;if(e.unit.outOfAction&&e.unit.outOfAction.length>0){var p=[];e.unit.outOfAction.forEach((function(e){e.isActive&&e.battleScar&&p.push(e.battleScar)})),v=r.a.createElement(b,{header:"Battle Scars",nameEffects:p})}var y=null;return l&&(y=r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,"Battle Participation",r.a.createElement(f.a,null),e.unit.battleParticipation)),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,"Marked For Greatness",r.a.createElement(f.a,null),e.unit.markedForGreatness)),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,"Agenda",r.a.createElement(f.a,null),e.unit.agendaXp)),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,"Kills",r.a.createElement(f.a,null),e.unit.kills)))),r.a.createElement(r.a.Fragment,null,i,s,v,r.a.createElement(d.a,{className:"mb-2",onClick:function(){c(!l)}},r.a.createElement(f.a,null,"Total Experience"),r.a.createElement(f.a,null,o)),y)};!function(e){e.BattleReady="Battle-Ready",e.Blooded="Blooded",e.BattleHardened="Battle-Hardened",e.Heroic="Heroic",e.Legendary="Legendary"}(v||(v={}));var y=a(36),g=a(38);var k=function(e){function t(t,a){e.editUnit((function(e){var n=Object(o.a)({},e.outOfAction[a]);t(n),e.outOfAction.splice(a,1,n)}))}var a=[];return e.unit.outOfAction&&e.unit.outOfAction.length>0&&(a.push(r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,"Battle Scar"),r.a.createElement(f.a,null,"Out Of Action"))),e.unit.outOfAction.forEach((function(e,n){var l;e.isActive&&a.push(r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,{className:"pr-1"},r.a.createElement(y.a.Control,{type:"textbox",onChange:function(e){return t((function(t){return t.battleScar.effect=e.target.value}),n)},value:null===(l=e.battleScar)||void 0===l?void 0:l.effect,placeholder:"Name"})),r.a.createElement(f.a,{className:"pl-1"},r.a.createElement(y.a.Control,{type:"textbox",onChange:function(e){return t((function(t){return t.xp=Number.parseInt(e.target.value)}),n)},value:e.xp,placeholder:"Effect"}))))}))),r.a.createElement(y.a.Group,{as:d.a,className:"mb-2",controlId:"formWarlordTrait"},r.a.createElement(f.a,null,r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(y.a.Label,null,"Out Of Action")),r.a.createElement(f.a,null,r.a.createElement(g.a,{variant:"outline-primary",onClick:function(t){t.preventDefault(),e.editUnit((function(e){var t=e.outOfAction;t||(t=[]),t.push({isActive:!0}),e.outOfAction=t}))},type:"button",block:!0},"Add"))),a))};var h=function(e){return r.a.createElement(y.a.Group,{as:d.a,className:"mb-2",controlId:"form".concat(e.formName)},r.a.createElement(f.a,{xs:e.resetFirstColSpan?void 0:4},r.a.createElement(y.a.Label,null,e.formName)),r.a.createElement(f.a,null,r.a.createElement(y.a.Control,{type:e.inputType,onChange:e.onChange,value:e.value,placeholder:e.placeHolder||e.formName})))};var A=function(e){var t=e.firstColumn;return e.label&&(t=r.a.createElement(y.a.Label,null,e.firstColumn)),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,t),r.a.createElement(f.a,null,e.secondColumn))};var O=function(e){var t=m(e.unit)+1,a=Object(n.useState)(t-1),l=Object(u.a)(a,1)[0],c=0,s=e.unit.battleHonours.map((function(t){var a,n;return c+=t.crusadePoints,t.rank===v.Blooded&&l<6||t.rank===v.BattleHardened&&l<16||t.rank===v.Heroic&&l<31||t.rank===v.Legendary&&l<51?r.a.createElement(h,{resetFirstColSpan:!0,inputType:"textbox",onChange:function(a){var n=Object(o.a)({},e.unit),r=n.battleHonours.find((function(e){return e.rank===t.rank}));(null===r||void 0===r?void 0:r.battleTrait)||(r.battleTrait={}),r.battleTrait.effect=a.target.value,e.updateUnit(n)},formName:t.rank,value:(null===(n=t.battleTrait)||void 0===n?void 0:n.effect)||""}):r.a.createElement(A,{firstColumn:t.rank,label:!0,secondColumn:(null===(a=t.battleTrait)||void 0===a?void 0:a.effect)||""})}));return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement("h3",{className:"border-top border-primary mt-3"},e.unit.name),r.a.createElement(A,{firstColumn:"Crusade Points",label:!0,secondColumn:c}),r.a.createElement(A,{firstColumn:"Battle Participation",label:!0,secondColumn:"".concat(e.unit.battleParticipation," + 1")}),r.a.createElement(h,{resetFirstColSpan:!0,inputType:"number",onChange:function(t){var a=Object(o.a)({},e.unit);a.markedForGreatness=Number.parseInt(t.target.value),e.updateUnit(a)},formName:"Greatness",value:e.unit.markedForGreatness}),r.a.createElement(h,{resetFirstColSpan:!0,inputType:"number",onChange:function(t){var a=Object(o.a)({},e.unit);a.agendaXp=Number.parseInt(t.target.value),e.updateUnit(a)},formName:"Agenda",value:e.unit.agendaXp}),r.a.createElement(h,{resetFirstColSpan:!0,inputType:"number",onChange:function(t){var a=Object(o.a)({},e.unit);a.kills=Number.parseInt(t.target.value),e.updateUnit(a)},formName:"Kills",value:e.unit.kills}),r.a.createElement(A,{firstColumn:"Total Experience",label:!0,secondColumn:t}),s,r.a.createElement(k,{unit:e.unit,editUnit:function(t){var a=Object(o.a)(Object(o.a)({},e.unit),{},{outOfAction:Object(i.a)(e.unit.outOfAction||[])});t(a),e.updateUnit(a)}})))};var N=function(e){var t=Object(n.useState)(e.crusadeArmy.units),a=Object(u.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(1),E=Object(u.a)(s,2),b=E[0],p=E[1],k=l.map((function(t,a){var n;if(null===(n=e.crusadeArmy.battleRosterUnitIds)||void 0===n?void 0:n.includes(a))return r.a.createElement(O,{unit:t,updateUnit:function(e){return function(e,t){var a=Object(i.a)(l),n=m(e)+1;e.battleHonours.findIndex((function(e){return e.rank===v.Blooded}))<0&&n>=6?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Blooded}):e.battleHonours.findIndex((function(e){return e.rank===v.BattleHardened}))<0&&n>=16?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.BattleHardened}):e.battleHonours.findIndex((function(e){return e.rank===v.Heroic}))<0&&n>=31?e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Heroic}):e.battleHonours.findIndex((function(e){return e.rank===v.Legendary}))<0&&n>=51&&e.battleHonours.push({crusadePoints:e.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Legendary}),a.splice(t,1,e),c(a)}(e,a)}})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,"Fill Unit Stats")),r.a.createElement(y.a,null,r.a.createElement(h,{resetFirstColSpan:!0,formName:"RP",inputType:"number",onChange:function(e){return p(Number.parseInt(e.target.value))},value:b}),k,r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",className:"mr-2",variant:"outline-primary",onClick:e.goBack},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){var t=Object(o.a)({},e.crusadeArmy);t.units=l,l.forEach((function(e){return e.battleParticipation++})),t.battleRosterUnitIds=void 0,e.updateArmy(t)}},"Save")))))};var C=function(e){var t,a=Object(n.useState)(),l=Object(u.a)(a,2),c=l[0],o=l[1],i=[];return null===(t=e.crusadeArmy.battleRosterUnitIds)||void 0===t||t.forEach((function(t){var a=e.crusadeArmy.units.find((function(e){return e.id===t}));a&&(i.push(r.a.createElement("h3",{className:"border-top border-primary mt-3"},a.name)),i.push(r.a.createElement(p,{unit:a,key:t})))})),c?r.a.createElement(N,{crusadeArmy:e.crusadeArmy,goBack:function(){return o(!1)},updateArmy:e.updateArmy}):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,"Battle Roster")),i,r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",className:"mr-2",variant:"outline-primary",onClick:e.goBack},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){return o(!0)}},"Continue"))))};var w=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],m=e.crusadeArmy.units.map((function(e){return r.a.createElement(y.a.Group,{onClick:function(){return function(e){var t=[];t=l.includes(e)?l.filter((function(t){return t!==e})):[].concat(Object(i.a)(l),[e]),c(t)}(e.id)}},r.a.createElement(y.a.Check,{type:"checkbox"},r.a.createElement(y.a.Check.Input,{checked:l.includes(e.id),className:"mr-1",style:{position:"relative"}}),r.a.createElement(y.a.Check.Label,{children:"".concat(e.name," ").concat(e.powerLevel," PL"),style:{fontWeight:"unset"}})))})),s=0;return e.crusadeArmy.units.map((function(e,t){l.includes(e.id)&&(s+=e.powerLevel)})),e.crusadeArmy.battleRosterUnitIds?r.a.createElement(C,{crusadeArmy:e.crusadeArmy,goBack:function(){var t=Object(o.a)({},e.crusadeArmy);t.battleRosterUnitIds=void 0,e.updateArmy(t)},updateArmy:e.updateArmy}):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,"Select Battle Roster")),r.a.createElement("p",null,"Selected Power Level:"," "+s),r.a.createElement(y.a,null,m),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",className:"mr-2",variant:"outline-primary",onClick:e.goBack},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){var t=Object(o.a)({},e.crusadeArmy);t.battleRosterUnitIds=l,e.updateArmy(t)},type:"submit"},"Continue"))))},j=a(12),x=a.n(j);var T=function(e){var t,a,l=Object(n.useState)(""===e.unit.name),c=Object(u.a)(l,1)[0],s=Object(n.useState)(e.unit),E=Object(u.a)(s,2),b=E[0],p=E[1];function A(t){t.preventDefault(),t.stopPropagation(),e.saveUnit(b)}function O(e){var t=Object(o.a)(Object(o.a)({},b),{},{battleHonours:Object(i.a)(b.battleHonours),outOfAction:Object(i.a)(b.outOfAction||[])});e(t);var a=m(t);t.battleHonours.findIndex((function(e){return e.rank===v.Blooded}))<0&&a>=6?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Blooded}):t.battleHonours.findIndex((function(e){return e.rank===v.BattleHardened}))<0&&a>=16?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.BattleHardened}):t.battleHonours.findIndex((function(e){return e.rank===v.Heroic}))<0&&a>=31?t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Heroic}):t.battleHonours.findIndex((function(e){return e.rank===v.Legendary}))<0&&a>=51&&t.battleHonours.push({crusadePoints:t.powerLevel>=11?2:1,battleTrait:{effect:""},rank:v.Legendary}),p(t)}var N=m(b),C=0,w=b.battleHonours.map((function(e,t){var a;return C+=e.crusadePoints,r.a.createElement(h,{key:t,formName:e.rank,inputType:"textbox",onChange:function(t){O((function(a){var n=a.battleHonours.find((function(t){return t.rank===e.rank}));(null===n||void 0===n?void 0:n.battleTrait)||(n.battleTrait={}),n.battleTrait.effect=t.target.value}))},value:null===(a=e.battleTrait)||void 0===a?void 0:a.effect})}));return r.a.createElement(y.a,{onSubmit:A,id:"edit-unit"},r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,c?"Adding Unit ":"Editting Unit ",r.a.createElement("img",{className:"icon",src:x.a,alt:"Edit Links",onClick:function(){window.confirm("Are you sure you wish to delete this unit?")&&e.deleteUnit(e.unit)}}))),r.a.createElement(h,{formName:"Name",inputType:"textbox",onChange:function(e){return O((function(t){return t.name=e.target.value}))},value:b.name}),r.a.createElement(h,{formName:"Power Level",inputType:"number",onChange:function(e){return O((function(t){return t.powerLevel=Number.parseInt(e.target.value)}))},value:b.powerLevel}),r.a.createElement(h,{formName:"Participation",inputType:"number",onChange:function(e){return O((function(t){return t.battleParticipation=Number.parseInt(e.target.value)}))},value:b.battleParticipation}),r.a.createElement(h,{formName:"Greatness",inputType:"number",onChange:function(e){return O((function(t){return t.markedForGreatness=Number.parseInt(e.target.value)}))},value:b.markedForGreatness}),r.a.createElement(h,{formName:"Agenda",inputType:"number",onChange:function(e){return O((function(t){return t.agendaXp=Number.parseInt(e.target.value)}))},value:b.agendaXp}),r.a.createElement(h,{formName:"Kills",inputType:"number",onChange:function(e){return O((function(t){return t.kills=Number.parseInt(e.target.value)}))},value:b.kills}),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(y.a.Label,null,"Total Experience")),r.a.createElement(f.a,null,N)),w,r.a.createElement(k,{unit:b,editUnit:O}),r.a.createElement(y.a.Group,{as:d.a,className:"mb-2",controlId:"formWarlordTrait"},r.a.createElement(f.a,null,r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(y.a.Label,null,"Warlord Trait"))),r.a.createElement(d.a,null,r.a.createElement(f.a,{className:"pr-1"},r.a.createElement(y.a.Control,{type:"textbox",onChange:function(e){return O((function(t){t.warlordTrait||(t.warlordTrait={}),t.warlordTrait.name=e.target.value}))},value:(null===(t=b.warlordTrait)||void 0===t?void 0:t.name)||"",placeholder:"Name"})),r.a.createElement(f.a,{className:"pl-1"},r.a.createElement(y.a.Control,{type:"textbox",onChange:function(e){return O((function(t){t.warlordTrait||(t.warlordTrait={}),t.warlordTrait.effect=e.target.value}))},value:(null===(a=b.warlordTrait)||void 0===a?void 0:a.effect)||"",placeholder:"Effect"}))))),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(y.a.Label,null,"Crusade Points")),r.a.createElement(f.a,null,C)),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"outline-primary",onClick:e.goBack,type:"button"},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:A,type:"submit"},"Save"))))},S=a(19),B=a.n(S);var H=function(e){var t=void 0;return e.onEdit&&(t=r.a.createElement("img",{className:"icon",src:B.a,alt:"Edit Links",onClick:e.onEdit})),r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,e.headerText,t),r.a.createElement("div",null,r.a.createElement("div",{className:"heading-sub-header"},r.a.createElement("b",null,e.powerLevel+" "),"PL"),r.a.createElement("div",{className:"heading-sub-header"},r.a.createElement("b",null,e.crusadePoints+" "),"CP")))};var L=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useMemo)((function(){return""===e.unit.name}),[]);if(l||o)return r.a.createElement(T,{deleteUnit:e.deleteUnit,goBack:function(){return c(!1)},unit:e.unit,saveUnit:function(t){e.saveUnit(t),c(!1),o&&e.goBack()}});var i=s(e.unit);return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{crusadePoints:i,headerText:e.unit.name,powerLevel:e.unit.powerLevel}),r.a.createElement(p,{unit:e.unit}),r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"outline-primary",onClick:e.goBack,type:"button"},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){return c(!0)},type:"button"},"Edit"))))};var I=a(20),P=a.n(I);var U=function(e){var t=Object(n.useState)(""===e.crusadeArmy.name),a=Object(u.a)(t,1)[0],l=Object(n.useState)(e.crusadeArmy),c=Object(u.a)(l,2),i=c[0],m=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{onSubmit:function(){return e.saveArmy(i)}},r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,a?"Add Army":"Edit Army",r.a.createElement("img",{className:"icon",src:x.a,alt:"Edit Links",onClick:function(){window.confirm("Are you sure you wish to delete this army?")&&e.handleDeleteArmy()}}))),r.a.createElement(h,{formName:"Name",onChange:function(e){return function(e){var t=Object(o.a)({},i);e(t),m(t)}((function(t){return t.name=e.target.value}))},inputType:"textbox",value:i.name}),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(y.a.Label,null,"Copy from Clipboard")),r.a.createElement(f.a,null,r.a.createElement("img",{className:"icon",src:P.a,alt:"Edit Links",onClick:function(){return function(e){if(navigator.clipboard){var t=JSON.stringify(e);navigator.clipboard.writeText(t).then((function(){window.alert("Copied to clipboard")})).catch((function(){window.alert("Can't copy to clipboard")}))}else window.alert("Can't copy to clipboard")}(e.crusadeArmy)}}))),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(y.a.Control,{as:"textarea",rows:5,onChange:function(e){var t=JSON.parse(e.target.value);t.id=i.id,m(t)},value:JSON.stringify(i)}))),r.a.createElement(d.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"outline-primary",onClick:e.goBack,type:"button"},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){return e.saveArmy(i)},type:"submit"},"Save")))))},F=a(34);var z=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(),m=Object(u.a)(i,2),E=m[0],b=m[1],p=Object(n.useState)(),y=Object(u.a)(p,2),k=y[0],h=y[1],A=Object(n.useState)(),O=Object(u.a)(A,2),N=O[0],C=O[1];function j(t){e.updateArmy(t),h(!1),b(!1)}Object(n.useEffect)((function(){var t=e.crusadeArmy.units.map((function(e){var t,a,n=null!==(t=null===(a=e.battleHonours[e.battleHonours.length-1])||void 0===a?void 0:a.rank)&&void 0!==t?t:v.BattleReady,l=s(e);return r.a.createElement("tr",{key:e.id,className:"read-only-display-item",onClick:function(){return c(e)}},r.a.createElement("td",null,e.name),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},n),r.a.createElement("td",null,l))}));C(t)}),[e.crusadeArmy,l,k]);var x=0,T=0;if(e.crusadeArmy.units.forEach((function(e){x+=s(e),T+=e.powerLevel})),E)return r.a.createElement(U,{crusadeArmy:e.crusadeArmy,goBack:function(){return b(!1)},handleDeleteArmy:function(){return e.deleteArmy(e.crusadeArmy)},saveArmy:j});if(k||e.crusadeArmy.battleRosterUnitIds)return r.a.createElement(w,{crusadeArmy:e.crusadeArmy,goBack:function(){return h(!1)},updateArmy:j});if(l)return r.a.createElement(L,{deleteUnit:function(t){var a=Object(o.a)({},e.crusadeArmy),n=a.units.findIndex((function(e){return e.id===t.id}));n>=0&&a.units.splice(n,1),e.updateArmy(a),c(void 0)},goBack:function(){return c(void 0)},saveUnit:function(t){var a=Object(o.a)({},e.crusadeArmy),n=a.units.findIndex((function(e){return e.id===t.id}));n>=0?a.units.splice(n,1,t):a.units.push(t),e.updateArmy(a),c(t)},unit:l});var S=null;return 0!==(null===N||void 0===N?void 0:N.length)&&(S=r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"CP"))),r.a.createElement("tbody",null,N))),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{crusadePoints:x,headerText:e.crusadeArmy.name,powerLevel:T,onEdit:function(){return b(!0)}}),r.a.createElement(d.a,null,r.a.createElement(f.a,null,S)),r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",className:"mr-2",variant:"outline-primary",onClick:e.goBack},"Back")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"outline-primary",onClick:function(){var t=0;e.crusadeArmy.units.forEach((function(e){e.id>t&&(t=e.id)})),c({id:t+1,agendaXp:0,battleHonours:[],battleParticipation:0,crusadePoints:0,kills:0,markedForGreatness:0,name:"",notes:"",outOfAction:[],powerLevel:0})}},"Add")),r.a.createElement(f.a,null,r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){return h(!0)}},"Log"))))};a(31);var G=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(),o=Object(u.a)(c,2),i=o[0],m=o[1],b=Object(n.useState)(),v=Object(u.a)(b,2),p=v[0],y=v[1],k=Object(n.useState)(),h=Object(u.a)(k,2),A=h[0],O=h[1];function N(e){var t=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]"),a=t.findIndex((function(t){return t.id===e.id}));a>=0?t.splice(a,1,e):t.push(e),window.localStorage.setItem("crusadeArmies",JSON.stringify(t)),m(t);var n=t.find((function(t){return t.id===e.id}));y(n)}function C(e){var t=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]"),a=t.findIndex((function(t){return t.id===e.id}));a>=0&&t.splice(a,1),window.localStorage.setItem("crusadeArmies",JSON.stringify(t)),m(t),y(void 0)}return Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("crusadeArmies")||"[]");m(e)}),[]),Object(n.useEffect)((function(){if(i){var e=i.map((function(e,t){var a=0,n=0;return e.units.forEach((function(e){a+=s(e),n+=e.powerLevel})),r.a.createElement(E.a,{className:"mb-3 border-primary",key:t,onClick:function(){return y(e)}},r.a.createElement(E.a.Body,null,r.a.createElement(E.a.Title,{as:"h2"},e.name),r.a.createElement(E.a.Text,null,n+" PL ",a+" CP")))}));O(e)}}),[i]),a?r.a.createElement(U,{crusadeArmy:a,handleDeleteArmy:function(){return C(a)},goBack:function(){return l(void 0)},saveArmy:N}):p?r.a.createElement(z,{deleteArmy:C,crusadeArmy:p,goBack:function(){return y(void 0)},updateArmy:N}):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:"my-2 mx-1 header"},r.a.createElement("h2",null,"Crusade Armies")),r.a.createElement(d.a,{className:"flex-grow-1",style:{overflow:"auto"}},r.a.createElement(f.a,null,A)),r.a.createElement(d.a,{md:"2"},r.a.createElement(f.a,{xs:4},r.a.createElement(g.a,{block:!0,size:"lg",variant:"primary",onClick:function(){var e,t={name:"",id:null!==(e=null===i||void 0===i?void 0:i.length)&&void 0!==e?e:0,units:[]};l(t)}},"Add"))))},R=a(35);var J=function(){return r.a.createElement(R.a,{fluid:!0,className:"h-100"},r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.b78cde05.chunk.js.map